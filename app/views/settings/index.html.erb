<div class="container-fluid">
  <div class="row">
    <%= render 'shared/sidebar' %>
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Configurações</h1>
      </div>
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title mb-4">Configurações da Conta</h5>
          <%= form_for(current_user, url: save_settings_path, method: :post, data: { turbo: true }) do |f| %>
            <div class="mb-3">
              <div class="form-check form-switch">
                <%= f.check_box :email_notifications, class: "form-check-input" %>
                <%= f.label :email_notifications, "Notificações por E-mail", class: "form-check-label" %>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-check form-switch">
                <%= f.check_box :dark_mode, class: "form-check-input" %>
                <%= f.label :dark_mode, "Modo Escuro", class: "form-check-label" %>
              </div>
            </div>
            <%= f.submit "Salvar Configurações", class: "btn btn-primary" %>
          <% end %>
          <!-- Botão de teste modificado para usar Stimulus -->
          <button type="button" 
                  class="btn btn-secondary mt-2" 
                  data-controller="alerts"
                  data-action="click->alerts#test">
            Teste Alert
          </button>
        </div>
      </div>
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title mb-4">Segurança</h5>
          <div class="d-grid gap-2">
            <%= link_to edit_user_registration_path, class: "btn btn-outline-primary mb-2" do %>
              <i class="bi bi-shield-lock me-2"></i>Alterar Senha
            <% end %>
            <%= link_to edit_user_registration_path, class: "btn btn-outline-primary mb-2" do %>
              <i class="bi bi-envelope me-2"></i>Alterar E-mail
            <% end %>
            <%= button_to delete_account_path, 
                method: :delete,
                class: "btn btn-outline-danger",
                data: { 
                  controller: "alerts",
                  action: "alerts#confirm"
                } do %>
              <i class="bi bi-trash me-2"></i>Excluir Conta
            <% end %>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
